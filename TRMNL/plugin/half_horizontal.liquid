<div class="mashup mashup--1Lx1R">
  <div class="layout">
    <div id="co2-gauge"></div>
  </div>
  <div class="layout">
    <div class="grid grid--cols-2">
      {% assign icon_map = 'temperature:mdi-thermometer,humidity:mdi-water-percent,atmospheric_pressure:mdi-gauge,carbon_dioxide:mdi-molecule-co2,wind_speed:mdi-weather-windy,precipitation_intensity:mdi-weather-rainy,battery:mdi-battery,illuminance:mdi-brightness-6,pm25:mdi-air-filter,pm10:mdi-air-filter,aqi:mdi-air-filter,volatile_organic_compounds:mdi-chemical-weapon,nitrogen_dioxide:mdi-molecule,nitrogen_monoxide:mdi-molecule,nitrous_oxide:mdi-molecule,ozone:mdi-shield-sun,sulphur_dioxide:mdi-molecule,default:mdi-gauge' | split: ',' %}
      {% for entity in entities %}
      {% if entity.type != 'co2_primary' %}
      {% assign entity_icon = 'mdi-gauge' %}
      {% for icon_pair in icon_map %}
      {% assign icon_data = icon_pair | split: ':' %}
      {% if icon_data[0] == entity.device_class %}
      {% assign entity_icon = icon_data[1] %}
      {% break %}
      {% endif %}
      {% endfor %}

      <div class="item">
        <div class="content">
          <span class="value value--tnums">
            {%- if entity.val == "unavailable" -%}
            -
            {%- else -%}
            {{- entity.val -}}{{- entity.u -}}
            {%- endif -%}
          </span>
          <span class="label">
            <span class="weather-icon mdi {{ entity_icon }}"/>
              {{ entity.n }}
            </span>
        </div>
      </div>
      {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

<script type="text/javascript">
  createSimpleCO2Gauge(getCO2Level(), 220);
</script>